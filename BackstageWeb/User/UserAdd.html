
<!DOCTYPE html>
<html>
<head>
    <title>用户信息</title>
    <link href="/Resource/Style/ivory.css?v=3" rel="stylesheet" type="text/css" />
    <link href="/Resource/Style/main.css?v=3" rel="stylesheet" type="text/css" />
    <link href="/Resource/Style/FortAwesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <script src="/Resource/Script/jquery.min.js" type="text/javascript"></script>
    <script src="/Resource/Script/jqueryupload/jqueryupload.js" type="text/javascript"></script>
    <script src="/Resource/Script/common.js?v=5" type="text/javascript"></script>
    <script type="text/javascript" src="/Resource/Script/jquery.validate.js"></script>

<style type="text/css">
    .ImportBox {
        position: relative;
        cursor: default;
    }

    .Import {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 30px;
        font-size: 0px;
        font-size: 200px\9;
        overflow: hidden;
        filter: alpha(opacity=0);
        -moz-opacity: 0;
        -khtml-opacity: 0;
        opacity: 0;
        cursor: pointer;
    }
</style>

</head>
<body>
    <form id="submitForm">
        <div id="contentheader">
            <div id="contentheader_title">新增用户</div>
            <div id="contentheader_button">
                <button onclick="parent.gotoPage('/User/UserIndex.html');" type="button">取消</button>
                <button type="submit" class="orange" onclick="submitForm();"><i class="fa fa-floppy-o"></i>&nbsp;保存</button>
            </div>
            <div style="clear:both;"></div>
        </div>

        <div id="content">
            <div class="area_title">用户信息</div>
            <div class="area">
                <table border="1" cellpadding="0" cellspacing="0" style="width: 80%;">

                    <tr>
                        <th width="100">帐号</th>
                        <td>
                            <input id="Account" maxlength="50" name="Account" placeholder="输入帐号" value="" type="text">
                        </td>
                        <th width="100">手机号码</th>
                        <td>
                            <input id="Phone" maxlength="20" name="Phone" placeholder="输入手机号码" value="" type="text">
                        </td>
                    </tr>
                    <tr>
                        <th width="100">密码</th>
                        <td>
                            <input id="Password" maxlength="50" name="Password" placeholder="输入密码" value="" type="Password">
                        </td>
                        <th width="100">用户类型</th>
                        <td>
                            <select id="UserType" name="UserType">
                                <option value="1">普通用户</option>
                                <option value="2">菜鸟规划师</option>
                                <option value="3">规划师</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <th width="100">姓名</th>
                        <td>
                            <input id="Name" maxlength="50" name="Name" placeholder="输入姓名" value="" type="text">
                        </td>
                        <th width="100">学历</th>
                        <td>
                            <input id="Education" maxlength="256" name="Education" placeholder="输入学历" value="" type="text">
                        </td>
                    </tr>
                    <tr>
                        <th width="100">性别</th>
                        <td>
                            <select id="Sex" name="Sex">
                                <option value="1">男</option>
                                <option value="2">女</option>
                            </select>
                        </td>
                        <th width="100">年龄</th>
                        <td>
                            <input id="Age" maxlength="3" name="Age" placeholder="输入年龄" value="" type="text">
                        </td>
                    </tr>
                    <tr>
                        <th width="100">地址</th>
                        <td>
                            <input id="Address" maxlength="256" name="Address" placeholder="输入地址" value="" type="text">
                        </td>
                        <th width="100">邮箱</th>
                        <td>
                            <input id="Email" maxlength="256" name="Email" placeholder="输入邮箱" value="" type="text">
                        </td>
                    </tr>
                    <tr>
                        <th width="100">头像</th>
                        <td colspan="3">
                            <img src="" id="HeadImageView" width="100px" height="100px">
                            <input id="HeadImage" maxlength="256" name="HeadImage" value="" type="hidden">
                            <a href="javascript:;" style="font-size:12px;margin:auto 5px;margin-top:10px;color:#333333; width: 70%" id="ImportBox" class="ImportBox">
                                &nbsp;&nbsp;<i class="fa fa-upload"></i>上传头像
                                <input type="file" id="Import" name="file" class="Import" />
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <th width="100">身份证号码</th>
                        <td colspan="3">
                            <input id="IDCard" maxlength="20" name="IDCard" value="" placeholder="输入身份证号码" type="text" style="width: 100%;">
                        </td>
                    </tr>
                    <tr>
                        <th width="100">身份证正面</th>
                        <td>
                            <img src="" id="IDCardJustView" width="100px" height="100px">
                            <input id="IDCardJust" maxlength="256" name="IDCardJust" value="" type="hidden">
                            <a href="javascript:;" style="font-size:12px;margin:auto 5px;margin-top:10px;color:#333333; width: 70%" id="ImportBoxIDCardJust" class="ImportBox">
                                &nbsp;&nbsp;<i class="fa fa-upload"></i>上传身份证正面
                                <input type="file" id="ImportIDCardJust" name="file" class="Import" />
                            </a>
                        </td>
                        <th width="100">身份证反面</th>
                        <td>
                            <img src="" id="IDCardBackView" width="100px" height="100px">
                            <input id="IDCardBack" maxlength="256" name="IDCardBack" value="" type="hidden">
                            <a href="javascript:;" style="font-size:12px;margin:auto 5px;margin-top:10px;color:#333333; width: 70%" id="ImportBoxIDCardBack" class="ImportBox">
                                &nbsp;&nbsp;<i class="fa fa-upload"></i>上传身份证反面
                                <input type="file" id="ImportIDCardBack" name="file" class="Import" />
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </form>
</body>
</html>
<script type="text/javascript">
    var submitForm = function () {
        $("#submitForm").validate({
            rules: {
                Name: {
                    required: true
                },Account: {
                    required: true
                }, Age: {
                    number: true
                }
            }, messages: {
                Name: {
                    required: "请输入名称"
                },Account: {
                    required: "请输入帐号"
                }, Age: {
                    number: "年龄必须为数字"
                }
            }, submitHandler: function () {
                $.ajaxForm("/user/back_insert_userinfo", "submitForm",
                function (result) {
                    if (result.status=="200") {
                        $.alert("用户新增成功", function () {
                            parent.gotoPage("/User/UserIndex.html");
                            //$(window.top.document).contents().find("#pageContent")[0].contentWindow.queryList(1);
                            //$.layerClose();
                        });
                    } else {
                        $.alert("用户新增失败,失败原因："+result.message);
                    }
                },
                function () {
                    $.alert("网络故障，请稍候重试!");
                });
            }
        });

    };
$(function(){
    $("#Import").change(function () { ImportFile("Import","HeadImage","HeadImageView"); });
    $("#ImportIDCardJust").change(function () { ImportFile("ImportIDCardJust","IDCardJust","IDCardJustView"); });
    $("#ImportIDCardBack").change(function () { ImportFile("ImportIDCardBack","IDCardBack","IDCardBackView"); });
})

</script>
